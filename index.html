<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mind-ar-face-aframe.prod.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #000; }
        /* ç”»é¢ãŒçœŸã£ç™½ãªæ™‚ã«ã€Œå‹•ã„ã¦ã„ã‚‹ã€ã“ã¨ã‚’ç¤ºã™è¡¨ç¤º */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #222; color: #FFB6C1; display: flex; 
            flex-direction: column; justify-content: center; align-items: center;
            z-index: 999; font-family: sans-serif;
        }
    </style>
</head>
<body>
    <div id="loader">
        <p>ğŸŒ¸ æ¡œAR æº–å‚™ä¸­ ğŸŒ¸</p>
        <p style="font-size: 12px; opacity: 0.7;">ã‚«ãƒ¡ãƒ©ã®è¨±å¯ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’ãŠå¾…ã¡ãã ã•ã„</p>
    </div>

    <a-scene 
        mindar-face="autoStart: true; uiLoading: no; uiError: yes; uiScanning: no;" 
        embedded vr-mode-ui="enabled: false" 
        device-orientation-permission-ui="enabled: false">
        
        <a-assets>
            <img id="sakura-img" src="img/sakura.png">
        </a-assets>

        <a-camera active="false" position="0 0 0"></a-camera>

        <a-entity mindar-face-target="anchorIndex: 8">
            <a-plane 
                src="#sakura-img" 
                position="0 0 0.05" 
                width="0.25" height="0.25" 
                material="transparent: true; alphaTest: 0.5; shader: flat">
            </a-plane>
        </a-entity>
    </a-scene>

    <script>
        const sceneEl = document.querySelector('a-scene');
        const loader = document.querySelector('#loader');

        // ã‚«ãƒ¡ãƒ©ãŒèµ·å‹•ã—ã¦ARã®æº–å‚™ãŒã§ããŸã‚‰ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’æ¶ˆã™
        sceneEl.addEventListener("arReady", () => {
            console.log("MindAR is ready");
            loader.style.display = "none";
        });

        // ãã‚‚ãã‚‚ARãŒé–‹å§‹ã•ã‚Œãªã‹ã£ãŸå ´åˆ
        sceneEl.addEventListener("arError", (e) => {
            console.error("MindAR Error", e);
            loader.innerHTML = "<p>ã‚«ãƒ¡ãƒ©ãŒèµ·å‹•ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚<br>è¨­å®šã§ã‚«ãƒ¡ãƒ©è¨±å¯ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>";
        });
    </script>
</body>
</html>